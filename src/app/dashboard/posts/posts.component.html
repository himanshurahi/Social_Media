<app-add-post></app-add-post>
<hr>
<!-- <app-loader *ngIf="loading"></app-loader> -->
<div *ngFor="let post of posts">
    <ul class="collection" style="border: none;">
        <li class="collection-item avatar">
            <img src="https://res.cloudinary.com/dzw9hmcvg/image/upload/v{{post.user?.picVersion}}/{{post.user?.picId}}" alt="" class="circle">
            <span class="title">{{post.user.username}}</span>
            <p>Username<br>
                {{fromNowDate(post.createdAt)}}
            </p>
            <a href="#!" class="secondary-content"><i class="material-icons">grade</i></a>
        </li>

        <div class="row">
            <div class="col s12 m12">
                <div class="card">
                    <div class="card-image" style="width: 30%; left: 35%;">
                        <img src="https://res.cloudinary.com/dzw9hmcvg/image/upload/v{{post?.picVersion}}/{{post?.picId}}" style="padding-top: 20px;">

                    </div>
                    <!-- <span class="card-title">Card Title</span> -->
                    <div class="card-content">
                        <p>{{post.post}}</p>
                    </div>
                    <div class="card-action">
                        <i class="material-icons" [ngClass]="{active: isLikedPost(post.likes, user.user._id)}" style="cursor: pointer;" (click)="likePost(post)">thumb_up </i><span
                            style="position: absolute; margin-left: 5px;">{{post.likes.length}}</span>
                        <i class="material-icons" [ngClass]="{active: isCommented(post.comments,user.user._id)}" style="margin-left: 35px; cursor: pointer;" (click) = 'onCommentClick(post)' >comment </i><span
                            style="position: absolute; margin-left: 5px;">{{post.comments.length}}</span>
                          

                    </div>
                </div>
            </div>
        </div>

    </ul>
</div>
<p *ngIf="posts.length == 0">No Post Yet</p>

